<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en" data-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>lattice/stencil</title>

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css?v=2.2.4">

<!-- JS -->
<script type="text/javascript" src="../dochack.js?v=2.2.4"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">lattice/stencil</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="../theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" oninput="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li><a class="reference" id="unified-stencil-operations-for-lattice-field-theory_toc" href="#unified-stencil-operations-for-lattice-field-theory">Unified Stencil Operations for Lattice Field Theory</a></li>
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#7" id="57">Types</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Direction" title="Direction = distinct int">Direction</a></li>
<li><a class="reference" href="#LatticeStencil" title="LatticeStencil[D] = object
  pattern*: StencilPattern[D]
  localGeom*: array[D, int]
  ghostWidth*: array[D, int]
  paddedGeom*: array[D, int]
  nLocalSites*: int
  nPaddedSites*: int
  nPoints*: int
  backend*: StencilBackend
  offsets*: seq[int32]
  isGhost*: seq[bool]
  simdGrid*: array[D, int]
  nSitesInner*: int
  nSitesOuter*: int
  nbrOuter*: seq[int32]
  nbrLane*: seq[int32]">LatticeStencil</a></li>
<li><a class="reference" href="#PathStep" title="PathStep = object
  dir*: int
  sign*: int">PathStep</a></li>
<li><a class="reference" href="#SignedDirection" title="SignedDirection = object
  dir*: Direction
  sign*: int">SignedDirection</a></li>
<li><a class="reference" href="#Stencil" title="Stencil[D] = StencilPattern[D]">Stencil</a></li>
<li><a class="reference" href="#StencilBackend" title="StencilBackend = enum
  sbScalar,                 ## Scalar CPU (no SIMD)
  sbSimd,                   ## SIMD-vectorized CPU (OpenMP)
  sbOpenCL,                 ## OpenCL GPU
  sbSycl                     ## SYCL GPU">StencilBackend</a></li>
<li><a class="reference" href="#StencilEntry" title="StencilEntry = object
  offset*: int
  isLocal*: bool
  permute*: uint8
  wrapAround*: bool">StencilEntry</a></li>
<li><a class="reference" href="#StencilPattern" title="StencilPattern[D] = object
  points*: seq[StencilPoint[D]]
  name*: string">StencilPattern</a></li>
<li><a class="reference" href="#StencilPoint" title="StencilPoint[D] = object
  offset*: array[D, int]
  id*: int">StencilPoint</a></li>
<li><a class="reference" href="#StencilShift" title="StencilShift[D] = object
  stencil*: ptr LatticeStencil[D]
  site*: int
  point*: int
  neighborIdx*: int">StencilShift</a></li>
<li><a class="reference" href="#StencilView" title="StencilView[D] = object
  stencil*: StencilPattern[D]
  localGeom*: array[D, int]
  nSites*: int
  nPoints*: int
  entries*: seq[StencilEntry]">StencilView</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#10" id="60">Consts</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#UseOpenCL" title="UseOpenCL {.booldefine.} = false">UseOpenCL</a></li>
<li><a class="reference" href="#UseOpenMP" title="UseOpenMP {.booldefine.} = false">UseOpenMP</a></li>
<li><a class="reference" href="#UseSYCL" title="UseSYCL {.booldefine.} = false">UseSYCL</a></li>
<li><a class="reference" href="#VectorWidth" title="VectorWidth {.intdefine.} = 1">VectorWidth</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">$
  <li><a class="reference" href="#%24%2CDirection" title="`$`(d: Direction): string">`$`(d: Direction): string</a></li>
<li><a class="reference" href="#%24%2CSignedDirection" title="`$`(sd: SignedDirection): string">`$`(sd: SignedDirection): string</a></li>
<li><a class="reference" href="#%24%2CStencilPoint%5BD%5D" title="`$`[D: static int](p: StencilPoint[D]): string">`$`[D: static int](p: StencilPoint[D]): string</a></li>
<li><a class="reference" href="#%24%2CStencilPattern%5BD%5D" title="`$`[D: static int](s: StencilPattern[D]): string">`$`[D: static int](s: StencilPattern[D]): string</a></li>

</ul>
<ul class="simple nested-toc-section">==
  <li><a class="reference" href="#%3D%3D%2CDirection%2CDirection" title="`==`(a, b: Direction): bool">`==`(a, b: Direction): bool</a></li>

</ul>
<ul class="simple nested-toc-section">addPoint
  <li><a class="reference" href="#addPoint%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D" title="addPoint[D: static int](s: var StencilPattern[D]; offset: array[D, int])">addPoint[D: static int](s: var StencilPattern[D]; offset: array[D, int])</a></li>
<li><a class="reference" href="#addPoint%2CStencilPattern%5BD%5D%2CSignedDirection" title="addPoint[D: static int](s: var StencilPattern[D]; sd: SignedDirection)">addPoint[D: static int](s: var StencilPattern[D]; sd: SignedDirection)</a></li>
<li><a class="reference" href="#addPoint%2CStencilPattern%5BD%5D%2Cint%2Cint" title="addPoint[D: static int](s: var StencilPattern[D]; sign: int; dir: int)">addPoint[D: static int](s: var StencilPattern[D]; sign: int; dir: int)</a></li>

</ul>
<ul class="simple nested-toc-section">backward
  <li><a class="reference" href="#backward%2CDirection" title="backward(d: Direction): SignedDirection">backward(d: Direction): SignedDirection</a></li>

</ul>
<ul class="simple nested-toc-section">backwardStencil
  <li><a class="reference" href="#backwardStencil%2CL" title="backwardStencil[D: static int; L: Lattice[D]](lat: L): StencilPattern[D]">backwardStencil[D: static int; L: Lattice[D]](lat: L): StencilPattern[D]</a></li>
<li><a class="reference" href="#backwardStencil" title="backwardStencil[D: static int](): StencilPattern[D]">backwardStencil[D: static int](): StencilPattern[D]</a></li>

</ul>
<ul class="simple nested-toc-section">bwd
  <li><a class="reference" href="#bwd%2Cint" title="bwd(dir: int): PathStep">bwd(dir: int): PathStep</a></li>
<li><a class="reference" href="#bwd%2CLatticeStencil%5BD%5D%2Cint%2Cint" title="bwd[D: static int](s: LatticeStencil[D]; site: int; dir: int): StencilShift[D]">bwd[D: static int](s: LatticeStencil[D]; site: int; dir: int): StencilShift[D]</a></li>

</ul>
<ul class="simple nested-toc-section">forward
  <li><a class="reference" href="#forward%2CDirection" title="forward(d: Direction): SignedDirection">forward(d: Direction): SignedDirection</a></li>

</ul>
<ul class="simple nested-toc-section">forwardStencil
  <li><a class="reference" href="#forwardStencil%2CL" title="forwardStencil[D: static int; L: Lattice[D]](lat: L): StencilPattern[D]">forwardStencil[D: static int; L: Lattice[D]](lat: L): StencilPattern[D]</a></li>
<li><a class="reference" href="#forwardStencil" title="forwardStencil[D: static int](): StencilPattern[D]">forwardStencil[D: static int](): StencilPattern[D]</a></li>

</ul>
<ul class="simple nested-toc-section">fwd
  <li><a class="reference" href="#fwd%2Cint" title="fwd(dir: int): PathStep">fwd(dir: int): PathStep</a></li>
<li><a class="reference" href="#fwd%2CLatticeStencil%5BD%5D%2Cint%2Cint" title="fwd[D: static int](s: LatticeStencil[D]; site: int; dir: int): StencilShift[D]">fwd[D: static int](s: LatticeStencil[D]; site: int; dir: int): StencilShift[D]</a></li>

</ul>
<ul class="simple nested-toc-section">getEntry
  <li><a class="reference" href="#getEntry%2CStencilView%5BD%5D%2Cint%2Cint" title="getEntry[D: static int](sv: StencilView[D]; site, point: int): StencilEntry">getEntry[D: static int](sv: StencilView[D]; site, point: int): StencilEntry</a></li>

</ul>
<ul class="simple nested-toc-section">getOffsetBuffer
  <li><a class="reference" href="#getOffsetBuffer%2CLatticeStencil%5BD%5D" title="getOffsetBuffer[D: static int](s: LatticeStencil[D]): ptr int32">getOffsetBuffer[D: static int](s: LatticeStencil[D]): ptr int32</a></li>

</ul>
<ul class="simple nested-toc-section">hash
  <li><a class="reference" href="#hash%2CDirection" title="hash(d: Direction): int">hash(d: Direction): int</a></li>

</ul>
<ul class="simple nested-toc-section">idx
  <li><a class="reference" href="#idx%2CStencilShift" title="idx(sh: StencilShift): int">idx(sh: StencilShift): int</a></li>

</ul>
<ul class="simple nested-toc-section">isGhostNeighbor
  <li><a class="reference" href="#isGhostNeighbor%2CLatticeStencil%5BD%5D%2Cint%2Cint" title="isGhostNeighbor[D: static int](s: LatticeStencil[D]; site, point: int): bool">isGhostNeighbor[D: static int](s: LatticeStencil[D]; site, point: int): bool</a></li>

</ul>
<ul class="simple nested-toc-section">laplacianStencil
  <li><a class="reference" href="#laplacianStencil%2CL" title="laplacianStencil[D: static int; L: Lattice[D]](lat: L): StencilPattern[D]">laplacianStencil[D: static int; L: Lattice[D]](lat: L): StencilPattern[D]</a></li>
<li><a class="reference" href="#laplacianStencil" title="laplacianStencil[D: static int](): StencilPattern[D]">laplacianStencil[D: static int](): StencilPattern[D]</a></li>

</ul>
<ul class="simple nested-toc-section">localToPadded
  <li><a class="reference" href="#localToPadded%2Cint%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D" title="localToPadded[D: static int](localSite: int; localGeom: array[D, int];
                             ghostWidth: array[D, int]): int">localToPadded[D: static int](localSite: int; localGeom: array[D, int];
                             ghostWidth: array[D, int]): int</a></li>
<li><a class="reference" href="#localToPadded%2CLatticeStencil%5BD%5D%2Cint" title="localToPadded[D: static int](s: LatticeStencil[D]; localSite: int): int">localToPadded[D: static int](s: LatticeStencil[D]; localSite: int): int</a></li>

</ul>
<ul class="simple nested-toc-section">nearestNeighborStencil
  <li><a class="reference" href="#nearestNeighborStencil%2CL" title="nearestNeighborStencil[D: static int; L: Lattice[D]](lat: L): StencilPattern[D]">nearestNeighborStencil[D: static int; L: Lattice[D]](lat: L): StencilPattern[D]</a></li>
<li><a class="reference" href="#nearestNeighborStencil" title="nearestNeighborStencil[D: static int](): StencilPattern[D]">nearestNeighborStencil[D: static int](): StencilPattern[D]</a></li>

</ul>
<ul class="simple nested-toc-section">neighbor
  <li><a class="reference" href="#neighbor%2CLatticeStencil%5BD%5D%2Cint%2Cint" title="neighbor[D: static int](s: LatticeStencil[D]; site, point: int): int">neighbor[D: static int](s: LatticeStencil[D]; site, point: int): int</a></li>

</ul>
<ul class="simple nested-toc-section">neighborOffset
  <li><a class="reference" href="#neighborOffset%2CStencilView%5BD%5D%2Cint%2Cint" title="neighborOffset[D: static int](sv: StencilView[D]; site, point: int): int">neighborOffset[D: static int](sv: StencilView[D]; site, point: int): int</a></li>

</ul>
<ul class="simple nested-toc-section">neighborSimd
  <li><a class="reference" href="#neighborSimd%2CLatticeStencil%5BD%5D%2Cint%2Cint%2Cint" title="neighborSimd[D: static int](s: LatticeStencil[D]; outer, lane, point: int): tuple[
    outer, lane: int]">neighborSimd[D: static int](s: LatticeStencil[D]; outer, lane, point: int): tuple[
    outer, lane: int]</a></li>

</ul>
<ul class="simple nested-toc-section">newLatticeStencil
  <li><a class="reference" href="#newLatticeStencil%2CL" title="newLatticeStencil[D: static int; L: Lattice[D]](lat: L): LatticeStencil[D]">newLatticeStencil[D: static int; L: Lattice[D]](lat: L): LatticeStencil[D]</a></li>
<li><a class="reference" href="#newLatticeStencil%2CStencilPattern%5BD%5D%2CL" title="newLatticeStencil[D: static int; L: Lattice[D]](pattern: StencilPattern[D];
    lat: L): LatticeStencil[D]">newLatticeStencil[D: static int; L: Lattice[D]](pattern: StencilPattern[D];
    lat: L): LatticeStencil[D]</a></li>
<li><a class="reference" href="#newLatticeStencil%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D" title="newLatticeStencil[D: static int](pattern: StencilPattern[D];
                                 localGeom: array[D, int]): LatticeStencil[D]">newLatticeStencil[D: static int](pattern: StencilPattern[D];
                                 localGeom: array[D, int]): LatticeStencil[D]</a></li>
<li><a class="reference" href="#newLatticeStencil%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D" title="newLatticeStencil[D: static int](pattern: StencilPattern[D];
                                 localGeom: array[D, int];
                                 ghostWidth: array[D, int]): LatticeStencil[D]">newLatticeStencil[D: static int](pattern: StencilPattern[D];
                                 localGeom: array[D, int];
                                 ghostWidth: array[D, int]): LatticeStencil[D]</a></li>
<li><a class="reference" href="#newLatticeStencil%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D" title="newLatticeStencil[D: static int](pattern: StencilPattern[D];
                                 localGeom: array[D, int];
                                 ghostWidth: array[D, int];
                                 simdGrid: array[D, int]): LatticeStencil[D]">newLatticeStencil[D: static int](pattern: StencilPattern[D];
                                 localGeom: array[D, int];
                                 ghostWidth: array[D, int];
                                 simdGrid: array[D, int]): LatticeStencil[D]</a></li>

</ul>
<ul class="simple nested-toc-section">newStencil
  <li><a class="reference" href="#newStencil%2Cstring" title="newStencil[D: static int](name: string = &quot;&quot;): Stencil[D]">newStencil[D: static int](name: string = &quot;&quot;): Stencil[D]</a></li>

</ul>
<ul class="simple nested-toc-section">newStencilPattern
  <li><a class="reference" href="#newStencilPattern%2Cstring" title="newStencilPattern[D: static int](name: string = &quot;&quot;): StencilPattern[D]">newStencilPattern[D: static int](name: string = &quot;&quot;): StencilPattern[D]</a></li>

</ul>
<ul class="simple nested-toc-section">newStencilPoint
  <li><a class="reference" href="#newStencilPoint%2Carray%5BD%2Cint%5D%2Cint" title="newStencilPoint[D: static int](offset: array[D, int]; id: int = 0): StencilPoint[
    D]">newStencilPoint[D: static int](offset: array[D, int]; id: int = 0): StencilPoint[
    D]</a></li>
<li><a class="reference" href="#newStencilPoint%2CSignedDirection" title="newStencilPoint[D: static int](sd: SignedDirection): StencilPoint[D]">newStencilPoint[D: static int](sd: SignedDirection): StencilPoint[D]</a></li>

</ul>
<ul class="simple nested-toc-section">newStencilView
  <li><a class="reference" href="#newStencilView%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D" title="newStencilView[D: static int](stencil: StencilPattern[D];
                              localGeom: array[D, int]): StencilView[D]">newStencilView[D: static int](stencil: StencilPattern[D];
                              localGeom: array[D, int]): StencilView[D]</a></li>

</ul>
<ul class="simple nested-toc-section">nLanes
  <li><a class="reference" href="#nLanes%2CLatticeStencil%5BD%5D" title="nLanes[D: static int](s: LatticeStencil[D]): int">nLanes[D: static int](s: LatticeStencil[D]): int</a></li>

</ul>
<ul class="simple nested-toc-section">nOuter
  <li><a class="reference" href="#nOuter%2CLatticeStencil%5BD%5D" title="nOuter[D: static int](s: LatticeStencil[D]): int">nOuter[D: static int](s: LatticeStencil[D]): int</a></li>

</ul>
<ul class="simple nested-toc-section">nPoints
  <li><a class="reference" href="#nPoints%2CStencilPattern%5BD%5D" title="nPoints[D: static int](s: StencilPattern[D]): int">nPoints[D: static int](s: StencilPattern[D]): int</a></li>

</ul>
<ul class="simple nested-toc-section">nSites
  <li><a class="reference" href="#nSites%2CLatticeStencil%5BD%5D" title="nSites[D: static int](s: LatticeStencil[D]): int">nSites[D: static int](s: LatticeStencil[D]): int</a></li>

</ul>
<ul class="simple nested-toc-section">offsetBufferSize
  <li><a class="reference" href="#offsetBufferSize%2CLatticeStencil%5BD%5D" title="offsetBufferSize[D: static int](s: LatticeStencil[D]): int">offsetBufferSize[D: static int](s: LatticeStencil[D]): int</a></li>

</ul>
<ul class="simple nested-toc-section">paddedToLocal
  <li><a class="reference" href="#paddedToLocal%2Cint%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D" title="paddedToLocal[D: static int](paddedSite: int; localGeom: array[D, int];
                             ghostWidth: array[D, int]): int">paddedToLocal[D: static int](paddedSite: int; localGeom: array[D, int];
                             ghostWidth: array[D, int]): int</a></li>
<li><a class="reference" href="#paddedToLocal%2CLatticeStencil%5BD%5D%2Cint" title="paddedToLocal[D: static int](s: LatticeStencil[D]; paddedSite: int): int">paddedToLocal[D: static int](s: LatticeStencil[D]; paddedSite: int): int</a></li>

</ul>
<ul class="simple nested-toc-section">pathToStencil
  <li><a class="reference" href="#pathToStencil%2CopenArray%5BPathStep%5D" title="pathToStencil[D: static int](path: openArray[PathStep]): StencilPattern[D]">pathToStencil[D: static int](path: openArray[PathStep]): StencilPattern[D]</a></li>

</ul>
<ul class="simple nested-toc-section">plaquettePath
  <li><a class="reference" href="#plaquettePath%2Cint%2Cint" title="plaquettePath(mu, nu: int): seq[PathStep]">plaquettePath(mu, nu: int): seq[PathStep]</a></li>

</ul>
<ul class="simple nested-toc-section">rectanglePath
  <li><a class="reference" href="#rectanglePath%2Cint%2Cint%2Cint%2Cint" title="rectanglePath(mu, nu: int; a, b: int): seq[PathStep]">rectanglePath(mu, nu: int; a, b: int): seq[PathStep]</a></li>

</ul>
<ul class="simple nested-toc-section">shift
  <li><a class="reference" href="#shift%2CLatticeStencil%5BD%5D%2Cint%2CSignedDirection" title="shift[D: static int](s: LatticeStencil[D]; site: int; sd: SignedDirection): StencilShift[
    D]">shift[D: static int](s: LatticeStencil[D]; site: int; sd: SignedDirection): StencilShift[
    D]</a></li>
<li><a class="reference" href="#shift%2CLatticeStencil%5BD%5D%2Cint%2Cint%2Cint" title="shift[D: static int](s: LatticeStencil[D]; site: int; sign: int; dir: int): StencilShift[
    D]">shift[D: static int](s: LatticeStencil[D]; site: int; sign: int; dir: int): StencilShift[
    D]</a></li>

</ul>
<ul class="simple nested-toc-section">step
  <li><a class="reference" href="#step%2Cint%2Cbool" title="step(dir: int; forward: bool = true): PathStep">step(dir: int; forward: bool = true): PathStep</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#15" id="65">Iterators</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">allDirections
  <li><a class="reference" href="#allDirections.i%2Cint" title="allDirections(nDim: int): SignedDirection">allDirections(nDim: int): SignedDirection</a></li>

</ul>
<ul class="simple nested-toc-section">directions
  <li><a class="reference" href="#directions.i%2Cint" title="directions(nDim: int): Direction">directions(nDim: int): Direction</a></li>

</ul>
<ul class="simple nested-toc-section">neighbors
  <li><a class="reference" href="#neighbors.i%2CLatticeStencil%5BD%5D%2Cint" title="neighbors[D: static int](s: LatticeStencil[D]; site: int): int">neighbors[D: static int](s: LatticeStencil[D]; site: int): int</a></li>

</ul>
<ul class="simple nested-toc-section">points
  <li><a class="reference" href="#points.i%2CLatticeStencil%5BD%5D" title="points[D: static int](s: LatticeStencil[D]): int">points[D: static int](s: LatticeStencil[D]): int</a></li>

</ul>
<ul class="simple nested-toc-section">sites
  <li><a class="reference" href="#sites.i%2CLatticeStencil%5BD%5D" title="sites[D: static int](s: LatticeStencil[D]): int">sites[D: static int](s: LatticeStencil[D]): int</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#18" id="68">Templates</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">forEachNeighbor
  <li><a class="reference" href="#forEachNeighbor.t%2CLatticeStencil%5BD%5D%2Cint%2Cuntyped%2Cuntyped%2Cuntyped" title="forEachNeighbor[D: static int](s: LatticeStencil[D]; site: int;
                               pointVar, nbrVar: untyped; body: untyped)">forEachNeighbor[D: static int](s: LatticeStencil[D]; site: int;
                               pointVar, nbrVar: untyped; body: untyped)</a></li>

</ul>
<ul class="simple nested-toc-section">T
  <li><a class="reference" href="#T.t" title="T(): Direction">T(): Direction</a></li>

</ul>
<ul class="simple nested-toc-section">X
  <li><a class="reference" href="#X.t" title="X(): Direction">X(): Direction</a></li>

</ul>
<ul class="simple nested-toc-section">Y
  <li><a class="reference" href="#Y.t" title="Y(): Direction">Y(): Direction</a></li>

</ul>
<ul class="simple nested-toc-section">Z
  <li><a class="reference" href="#Z.t" title="Z(): Direction">Z(): Direction</a></li>

</ul>

    </ul>
  </details>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    
    <div id="tocRoot"></div>
    
    <p class="module-desc">
<h1><a class="toc-backref" id="unified-stencil-operations-for-lattice-field-theory" href="#unified-stencil-operations-for-lattice-field-theory">Unified Stencil Operations for Lattice Field Theory</a></h1><p>This module provides a single, unified stencil type that works identically across all backends (OpenMP, OpenCL, SYCL) and handles distributed lattices with ghost regions automatically.</p>
<p>Key Design Principles:</p>
<ul class="simple"><li><strong>One Type</strong>: <tt class="docutils literal"><span class="pre"><span class="Identifier">LatticeStencil</span><span class="Punctuation">[</span><span class="Identifier">D</span><span class="Punctuation">]</span></span></tt> is the only stencil type you need</li>
<li><strong>Always Distributed</strong>: Lattices are always distributed, so stencils always understand ghost regions and padded layouts</li>
<li><strong>Backend Agnostic</strong>: Same API inside <tt class="docutils literal"><span class="pre"><span class="Identifier">each</span></span></tt> loops for all backends</li>
<li><strong>Clean Operators</strong>: Use <tt class="docutils literal"><span class="pre"><span class="Identifier">view</span><span class="Punctuation">[</span><span class="Identifier">stencil</span><span class="Operator">.</span><span class="Identifier">shift</span><span class="Punctuation">(</span><span class="Identifier">n</span><span class="Punctuation">,</span> <span class="Identifier">dir</span><span class="Punctuation">)</span><span class="Punctuation">]</span></span></tt> for neighbor access</li>
</ul>
<p>Usage Example:</p>
<p><pre class="listing"><span class="Comment"># Create stencil from lattice - D is inferred automatically</span>
<span class="Keyword">let</span> <span class="Identifier">stencil</span> <span class="Operator">=</span> <span class="Identifier">newLatticeStencil</span><span class="Punctuation">(</span><span class="Identifier">nearestNeighborStencil</span><span class="Punctuation">(</span><span class="Identifier">lat</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">lat</span><span class="Punctuation">)</span>
<span class="Comment"># Or even simpler (defaults to nearest-neighbor):</span>
<span class="Keyword">let</span> <span class="Identifier">stencil</span> <span class="Operator">=</span> <span class="Identifier">newLatticeStencil</span><span class="Punctuation">(</span><span class="Identifier">lat</span><span class="Punctuation">)</span>

<span class="Comment"># Inside any backend's each loop:</span>
<span class="Keyword">for</span> <span class="Identifier">n</span> <span class="Keyword">in</span> <span class="Identifier">each</span> <span class="FloatNumber">0.</span><span class="Operator">.&lt;</span><span class="Identifier">view</span><span class="Operator">.</span><span class="Identifier">numSites</span><span class="Punctuation">:</span>
  <span class="Keyword">for</span> <span class="Identifier">dir</span> <span class="Keyword">in</span> <span class="FloatNumber">0.</span><span class="Operator">.&lt;</span><span class="DecNumber">4</span><span class="Punctuation">:</span>
    <span class="Comment"># Forward neighbor</span>
    <span class="Keyword">let</span> <span class="Identifier">fwd</span> <span class="Operator">=</span> <span class="Identifier">view</span><span class="Punctuation">[</span><span class="Identifier">stencil</span><span class="Operator">.</span><span class="Identifier">shift</span><span class="Punctuation">(</span><span class="Identifier">n</span><span class="Punctuation">,</span> <span class="Operator">+</span><span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="Identifier">dir</span><span class="Punctuation">)</span><span class="Punctuation">]</span>
    <span class="Comment"># Backward neighbor</span>
    <span class="Keyword">let</span> <span class="Identifier">bwd</span> <span class="Operator">=</span> <span class="Identifier">view</span><span class="Punctuation">[</span><span class="Identifier">stencil</span><span class="Operator">.</span><span class="Identifier">shift</span><span class="Punctuation">(</span><span class="Identifier">n</span><span class="Punctuation">,</span> <span class="Operator">-</span><span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="Identifier">dir</span><span class="Punctuation">)</span><span class="Punctuation">]</span>
    <span class="Identifier">result</span><span class="Punctuation">[</span><span class="Identifier">n</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Identifier">fwd</span> <span class="Operator">+</span> <span class="Identifier">bwd</span> <span class="Operator">-</span> <span class="FloatNumber">2.0</span> <span class="Operator">*</span> <span class="Identifier">view</span><span class="Punctuation">[</span><span class="Identifier">n</span><span class="Punctuation">]</span></pre></p>
<p>The stencil handles:</p>
<ul class="simple"><li>Periodic boundary conditions within local domain</li>
<li>Ghost region detection and padded coordinate mapping</li>
<li>SIMD-aware indexing for vectorized backends</li>
<li>Device buffer offsets for GPU backends</li>
</ul>
</p>
    <div class="section" id="6">
  <h1><a class="toc-backref" href="#6">Imports</a></h1>
  <dl class="item">
    <a class="reference external" href="latticeconcept.html">latticeconcept</a>, <a class="reference external" href="../globalarrays/gatypes.html">../globalarrays/gatypes</a>
  </dl>
</div>
<div class="section" id="7">
  <h1><a class="toc-backref" href="#7">Types</a></h1>
  <dl class="item">
    <div id="Direction">
  <dt><pre><a href="stencil.html#Direction"><span class="Identifier">Direction</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Type-safe direction index (0 = x, 1 = y, 2 = z, 3 = t for 4D)
    
  </dd>
</div>
<div id="LatticeStencil">
  <dt><pre><a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">pattern</span><span class="Operator">*</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span>
  <span class="Identifier">localGeom</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">ghostWidth</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">paddedGeom</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">nLocalSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">nPaddedSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">nPoints</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">backend</span><span class="Operator">*</span><span class="Other">:</span> <a href="stencil.html#StencilBackend"><span class="Identifier">StencilBackend</span></a>
  <span class="Identifier">offsets</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">int32</span><span class="Other">]</span>
  <span class="Identifier">isGhost</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">bool</span><span class="Other">]</span>
  <span class="Identifier">simdGrid</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">nSitesInner</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">nSitesOuter</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">nbrOuter</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">int32</span><span class="Other">]</span>
  <span class="Identifier">nbrLane</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">int32</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Unified stencil for all backends and distributed lattices</p>
<p>Provides a single, clean API for neighbor access that works identically whether you're using OpenMP, OpenCL, or SYCL.</p>

    
  </dd>
</div>
<div id="PathStep">
  <dt><pre><a href="stencil.html#PathStep"><span class="Identifier">PathStep</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">dir</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">sign</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="SignedDirection">
  <dt><pre><a href="stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">dir</span><span class="Operator">*</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a>
  <span class="Identifier">sign</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Direction with sign for forward (+1) or backward (-1) shifts
    
  </dd>
</div>
<div id="Stencil">
  <dt><pre><a href="stencil.html#Stencil"><span class="Identifier">Stencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="StencilBackend">
  <dt><pre><a href="stencil.html#StencilBackend"><span class="Identifier">StencilBackend</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">sbScalar</span><span class="Other">,</span>                 <span class="Comment">## Scalar CPU (no SIMD)</span>
  <span class="Identifier">sbSimd</span><span class="Other">,</span>                   <span class="Comment">## SIMD-vectorized CPU (OpenMP)</span>
  <span class="Identifier">sbOpenCL</span><span class="Other">,</span>                 <span class="Comment">## OpenCL GPU</span>
  <span class="Identifier">sbSycl</span>                     <span class="Comment">## SYCL GPU</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="StencilEntry">
  <dt><pre><a href="stencil.html#StencilEntry"><span class="Identifier">StencilEntry</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">offset</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">isLocal</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">bool</span>
  <span class="Identifier">permute</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint8</span>
  <span class="Identifier">wrapAround</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="StencilPattern">
  <dt><pre><a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">points</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="stencil.html#StencilPoint"><span class="Identifier">StencilPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">]</span>
  <span class="Identifier">name</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
  <dd>
    
    A stencil pattern defining neighbor offsets
    
  </dd>
</div>
<div id="StencilPoint">
  <dt><pre><a href="stencil.html#StencilPoint"><span class="Identifier">StencilPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">offset</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">id</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    A single point in a stencil pattern (offset from center)
    
  </dd>
</div>
<div id="StencilShift">
  <dt><pre><a href="stencil.html#StencilShift"><span class="Identifier">StencilShift</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">stencil</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span>
  <span class="Identifier">site</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">point</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">neighborIdx</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Result of stencil.shift() - used with view<a class="reference internal" href="#"></a> for neighbor access
    
  </dd>
</div>
<div id="StencilView">
  <dt><pre><a href="stencil.html#StencilView"><span class="Identifier">StencilView</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">stencil</span><span class="Operator">*</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span>
  <span class="Identifier">localGeom</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">nSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">nPoints</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">entries</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="stencil.html#StencilEntry"><span class="Identifier">StencilEntry</span></a><span class="Other">]</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

  </dl>
</div>
<div class="section" id="10">
  <h1><a class="toc-backref" href="#10">Consts</a></h1>
  <dl class="item">
    <div id="UseOpenCL">
  <dt><pre><a href="stencil.html#UseOpenCL"><span class="Identifier">UseOpenCL</span></a> {.<span class="Identifier">booldefine</span>.} <span class="Other">=</span> <span class="DecNumber">false</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="UseOpenMP">
  <dt><pre><a href="stencil.html#UseOpenMP"><span class="Identifier">UseOpenMP</span></a> {.<span class="Identifier">booldefine</span>.} <span class="Other">=</span> <span class="DecNumber">false</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="UseSYCL">
  <dt><pre><a href="stencil.html#UseSYCL"><span class="Identifier">UseSYCL</span></a> {.<span class="Identifier">booldefine</span>.} <span class="Other">=</span> <span class="DecNumber">false</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="VectorWidth">
  <dt><pre><a href="stencil.html#VectorWidth"><span class="Identifier">VectorWidth</span></a> {.<span class="Identifier">intdefine</span>.} <span class="Other">=</span> <span class="DecNumber">1</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="$-procs-all">
  <div id="$,Direction">
  <dt><pre><span class="Keyword">proc</span> <a href="#%24%2CDirection"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">d</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="$,SignedDirection">
  <dt><pre><span class="Keyword">proc</span> <a href="#%24%2CSignedDirection"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">sd</span><span class="Other">:</span> <a href="stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="$,StencilPoint[D]">
  <dt><pre><span class="Keyword">proc</span> <a href="#%24%2CStencilPoint%5BD%5D"><span class="Identifier">`$`</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">p</span><span class="Other">:</span> <a href="stencil.html#StencilPoint"><span class="Identifier">StencilPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="$,StencilPattern[D]">
  <dt><pre><span class="Keyword">proc</span> <a href="#%24%2CStencilPattern%5BD%5D"><span class="Identifier">`$`</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="==-procs-all">
  <div id="==,Direction,Direction">
  <dt><pre><span class="Keyword">proc</span> <a href="#%3D%3D%2CDirection%2CDirection"><span class="Identifier">`==`</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">borrow</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="addPoint-procs-all">
  <div id="addPoint,StencilPattern[D],array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#addPoint%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D"><span class="Identifier">addPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">offset</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="addPoint,StencilPattern[D],SignedDirection">
  <dt><pre><span class="Keyword">proc</span> <a href="#addPoint%2CStencilPattern%5BD%5D%2CSignedDirection"><span class="Identifier">addPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">sd</span><span class="Other">:</span> <a href="stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a><span class="Other">)</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="addPoint,StencilPattern[D],int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#addPoint%2CStencilPattern%5BD%5D%2Cint%2Cint"><span class="Identifier">addPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">sign</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">dir</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="backward-procs-all">
  <div id="backward,Direction">
  <dt><pre><span class="Keyword">proc</span> <a href="#backward%2CDirection"><span class="Identifier">backward</span></a><span class="Other">(</span><span class="Identifier">d</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="backwardStencil-procs-all">
  <div id="backwardStencil,L">
  <dt><pre><span class="Keyword">proc</span> <a href="#backwardStencil%2CL"><span class="Identifier">backwardStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">L</span><span class="Other">:</span> <a href="latticeconcept.html#Lattice"><span class="Identifier">Lattice</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">lat</span><span class="Other">:</span> <span class="Identifier">L</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create a backward-only stencil, inferring D from the lattice
    
  </dd>
</div>
<div id="backwardStencil">
  <dt><pre><span class="Keyword">proc</span> <a href="#backwardStencil"><span class="Identifier">backwardStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Backward-only stencil (-x, -y, -z, -t)
    
  </dd>
</div>

</div>
<div id="bwd-procs-all">
  <div id="bwd,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#bwd%2Cint"><span class="Identifier">bwd</span></a><span class="Other">(</span><span class="Identifier">dir</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#PathStep"><span class="Identifier">PathStep</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="bwd,LatticeStencil[D],int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#bwd%2CLatticeStencil%5BD%5D%2Cint%2Cint"><span class="Identifier">bwd</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">dir</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilShift"><span class="Identifier">StencilShift</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Shorthand for backward shift
    
  </dd>
</div>

</div>
<div id="forward-procs-all">
  <div id="forward,Direction">
  <dt><pre><span class="Keyword">proc</span> <a href="#forward%2CDirection"><span class="Identifier">forward</span></a><span class="Other">(</span><span class="Identifier">d</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="forwardStencil-procs-all">
  <div id="forwardStencil,L">
  <dt><pre><span class="Keyword">proc</span> <a href="#forwardStencil%2CL"><span class="Identifier">forwardStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">L</span><span class="Other">:</span> <a href="latticeconcept.html#Lattice"><span class="Identifier">Lattice</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">lat</span><span class="Other">:</span> <span class="Identifier">L</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create a forward-only stencil, inferring D from the lattice
    
  </dd>
</div>
<div id="forwardStencil">
  <dt><pre><span class="Keyword">proc</span> <a href="#forwardStencil"><span class="Identifier">forwardStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Forward-only stencil (+x, +y, +z, +t)
    
  </dd>
</div>

</div>
<div id="fwd-procs-all">
  <div id="fwd,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fwd%2Cint"><span class="Identifier">fwd</span></a><span class="Other">(</span><span class="Identifier">dir</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#PathStep"><span class="Identifier">PathStep</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="fwd,LatticeStencil[D],int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#fwd%2CLatticeStencil%5BD%5D%2Cint%2Cint"><span class="Identifier">fwd</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">dir</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilShift"><span class="Identifier">StencilShift</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Shorthand for forward shift
    
  </dd>
</div>

</div>
<div id="getEntry-procs-all">
  <div id="getEntry,StencilView[D],int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#getEntry%2CStencilView%5BD%5D%2Cint%2Cint"><span class="Identifier">getEntry</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">sv</span><span class="Other">:</span> <a href="stencil.html#StencilView"><span class="Identifier">StencilView</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">,</span> <span class="Identifier">point</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilEntry"><span class="Identifier">StencilEntry</span></a> {.
    <span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="getOffsetBuffer-procs-all">
  <div id="getOffsetBuffer,LatticeStencil[D]">
  <dt><pre><span class="Keyword">proc</span> <a href="#getOffsetBuffer%2CLatticeStencil%5BD%5D"><span class="Identifier">getOffsetBuffer</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">int32</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="hash-procs-all">
  <div id="hash,Direction">
  <dt><pre><span class="Keyword">proc</span> <a href="#hash%2CDirection"><span class="Identifier">hash</span></a><span class="Other">(</span><span class="Identifier">d</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="idx-procs-all">
  <div id="idx,StencilShift">
  <dt><pre><span class="Keyword">proc</span> <a href="#idx%2CStencilShift"><span class="Identifier">idx</span></a><span class="Other">(</span><span class="Identifier">sh</span><span class="Other">:</span> <a href="stencil.html#StencilShift"><span class="Identifier">StencilShift</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="isGhostNeighbor-procs-all">
  <div id="isGhostNeighbor,LatticeStencil[D],int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#isGhostNeighbor%2CLatticeStencil%5BD%5D%2Cint%2Cint"><span class="Identifier">isGhostNeighbor</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">,</span> <span class="Identifier">point</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.
    <span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Check if neighbor is in a ghost region
    
  </dd>
</div>

</div>
<div id="laplacianStencil-procs-all">
  <div id="laplacianStencil,L">
  <dt><pre><span class="Keyword">proc</span> <a href="#laplacianStencil%2CL"><span class="Identifier">laplacianStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">L</span><span class="Other">:</span> <a href="latticeconcept.html#Lattice"><span class="Identifier">Lattice</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">lat</span><span class="Other">:</span> <span class="Identifier">L</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create a laplacian stencil, inferring D from the lattice
    
  </dd>
</div>
<div id="laplacianStencil">
  <dt><pre><span class="Keyword">proc</span> <a href="#laplacianStencil"><span class="Identifier">laplacianStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="localToPadded-procs-all">
  <div id="localToPadded,int,array[D,int],array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#localToPadded%2Cint%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D"><span class="Identifier">localToPadded</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">localSite</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span>
                                  <span class="Identifier">ghostWidth</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="localToPadded,LatticeStencil[D],int">
  <dt><pre><span class="Keyword">proc</span> <a href="#localToPadded%2CLatticeStencil%5BD%5D%2Cint"><span class="Identifier">localToPadded</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">localSite</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Convert local site index to padded site index
    
  </dd>
</div>

</div>
<div id="nearestNeighborStencil-procs-all">
  <div id="nearestNeighborStencil,L">
  <dt><pre><span class="Keyword">proc</span> <a href="#nearestNeighborStencil%2CL"><span class="Identifier">nearestNeighborStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">L</span><span class="Other">:</span> <a href="latticeconcept.html#Lattice"><span class="Identifier">Lattice</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">lat</span><span class="Other">:</span> <span class="Identifier">L</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Create a nearest-neighbor stencil, inferring D from the lattice</p>
<p>Example: let lat = newSimpleCubicLattice(<a class="reference internal" href="#8, 8, 8, 16">8, 8, 8, 16</a>) let pattern = nearestNeighborStencil(lat)  # D=4 inferred</p>

    
  </dd>
</div>
<div id="nearestNeighborStencil">
  <dt><pre><span class="Keyword">proc</span> <a href="#nearestNeighborStencil"><span class="Identifier">nearestNeighborStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create a nearest-neighbor stencil with 2D points (forward and backward in each dimension).
    
  </dd>
</div>

</div>
<div id="neighbor-procs-all">
  <div id="neighbor,LatticeStencil[D],int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#neighbor%2CLatticeStencil%5BD%5D%2Cint%2Cint"><span class="Identifier">neighbor</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">,</span> <span class="Identifier">point</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.
    <span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    <p>Get neighbor index in PADDED layout</p>
<p>This is the primary API for reading neighbors. The returned index is valid for accessing a padded tensor that includes ghost regions.</p>

    
  </dd>
</div>

</div>
<div id="neighborOffset-procs-all">
  <div id="neighborOffset,StencilView[D],int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#neighborOffset%2CStencilView%5BD%5D%2Cint%2Cint"><span class="Identifier">neighborOffset</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">sv</span><span class="Other">:</span> <a href="stencil.html#StencilView"><span class="Identifier">StencilView</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">,</span> <span class="Identifier">point</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.
    <span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="neighborSimd-procs-all">
  <div id="neighborSimd,LatticeStencil[D],int,int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#neighborSimd%2CLatticeStencil%5BD%5D%2Cint%2Cint%2Cint"><span class="Identifier">neighborSimd</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">outer</span><span class="Other">,</span> <span class="Identifier">lane</span><span class="Other">,</span> <span class="Identifier">point</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">tuple</span><span class="Other">[</span>
    <span class="Identifier">outer</span><span class="Other">,</span> <span class="Identifier">lane</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">]</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    SIMD-aware neighbor lookup for vectorized backends
    
  </dd>
</div>

</div>
<div id="newLatticeStencil-procs-all">
  <div id="newLatticeStencil,L">
  <dt><pre><span class="Keyword">proc</span> <a href="#newLatticeStencil%2CL"><span class="Identifier">newLatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">L</span><span class="Other">:</span> <a href="latticeconcept.html#Lattice"><span class="Identifier">Lattice</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">lat</span><span class="Other">:</span> <span class="Identifier">L</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Create a nearest-neighbor stencil from a Lattice (most convenient constructor)</p>
<p>Infers D and uses nearestNeighborStencil automatically.</p>
<p>Example:</p>
<p><pre class="listing"><span class="Keyword">let</span> <span class="Identifier">lat</span> <span class="Operator">=</span> <span class="Identifier">newSimpleCubicLattice</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="DecNumber">8</span><span class="Punctuation">,</span> <span class="DecNumber">8</span><span class="Punctuation">,</span> <span class="DecNumber">8</span><span class="Punctuation">,</span> <span class="DecNumber">16</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
<span class="Keyword">let</span> <span class="Identifier">stencil</span> <span class="Operator">=</span> <span class="Identifier">newLatticeStencil</span><span class="Punctuation">(</span><span class="Identifier">lat</span><span class="Punctuation">)</span>  <span class="Comment"># 4D nearest-neighbor stencil</span></pre></p>

    
  </dd>
</div>
<div id="newLatticeStencil,StencilPattern[D],L">
  <dt><pre><span class="Keyword">proc</span> <a href="#newLatticeStencil%2CStencilPattern%5BD%5D%2CL"><span class="Identifier">newLatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">L</span><span class="Other">:</span> <a href="latticeconcept.html#Lattice"><span class="Identifier">Lattice</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pattern</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span>
    <span class="Identifier">lat</span><span class="Other">:</span> <span class="Identifier">L</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Create stencil from a Lattice type (preferred constructor)</p>
<p>Automatically extracts local geometry and ghost width from the lattice. When <tt class="docutils literal"><span class="pre"><span class="Identifier">mpiGrid</span></span></tt> uses auto-detect sentinels (values â‰¤ 0), queries GlobalArrays for the actual MPI decomposition.</p>
<p>Example:</p>
<p><pre class="listing"><span class="Keyword">let</span> <span class="Identifier">lat</span> <span class="Operator">=</span> <span class="Identifier">newSimpleCubicLattice</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="DecNumber">16</span><span class="Punctuation">,</span> <span class="DecNumber">16</span><span class="Punctuation">,</span> <span class="DecNumber">16</span><span class="Punctuation">,</span> <span class="DecNumber">32</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Punctuation">[</span><span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="DecNumber">1</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
<span class="Keyword">let</span> <span class="Identifier">stencil</span> <span class="Operator">=</span> <span class="Identifier">newLatticeStencil</span><span class="Punctuation">(</span><span class="Identifier">nearestNeighborStencil</span><span class="Punctuation">[</span><span class="DecNumber">4</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">lat</span><span class="Punctuation">)</span></pre></p>

    
  </dd>
</div>
<div id="newLatticeStencil,StencilPattern[D],array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#newLatticeStencil%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D"><span class="Identifier">newLatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pattern</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span>
                                      <span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create stencil with zero ghost width (local-only periodic BC)
    
  </dd>
</div>
<div id="newLatticeStencil,StencilPattern[D],array[D,int],array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#newLatticeStencil%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D"><span class="Identifier">newLatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pattern</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span>
                                      <span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span>
                                      <span class="Identifier">ghostWidth</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create stencil with default SIMD grid
    
  </dd>
</div>
<div id="newLatticeStencil,StencilPattern[D],array[D,int],array[D,int],array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#newLatticeStencil%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D"><span class="Identifier">newLatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pattern</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span>
                                      <span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span>
                                      <span class="Identifier">ghostWidth</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span>
                                      <span class="Identifier">simdGrid</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Create a unified lattice stencil with explicit parameters</p>
<p>Parameters: pattern: Stencil pattern (e.g., nearestNeighborStencil[4]()) localGeom: Local lattice dimensions (without ghosts) ghostWidth: Ghost width in each dimension simdGrid: SIMD grid for vectorization (use <a class="reference internal" href="#1,1,1,1">1,1,1,1</a> for no SIMD)</p>

    
  </dd>
</div>

</div>
<div id="newStencil-procs-all">
  <div id="newStencil,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#newStencil%2Cstring"><span class="Identifier">newStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">name</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#Stencil"><span class="Identifier">Stencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="newStencilPattern-procs-all">
  <div id="newStencilPattern,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#newStencilPattern%2Cstring"><span class="Identifier">newStencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">name</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="newStencilPoint-procs-all">
  <div id="newStencilPoint,array[D,int],int">
  <dt><pre><span class="Keyword">proc</span> <a href="#newStencilPoint%2Carray%5BD%2Cint%5D%2Cint"><span class="Identifier">newStencilPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">offset</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">id</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPoint"><span class="Identifier">StencilPoint</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="newStencilPoint,SignedDirection">
  <dt><pre><span class="Keyword">proc</span> <a href="#newStencilPoint%2CSignedDirection"><span class="Identifier">newStencilPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">sd</span><span class="Other">:</span> <a href="stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPoint"><span class="Identifier">StencilPoint</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="newStencilView-procs-all">
  <div id="newStencilView,StencilPattern[D],array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#newStencilView%2CStencilPattern%5BD%5D%2Carray%5BD%2Cint%5D"><span class="Identifier">newStencilView</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stencil</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span>
                                   <span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilView"><span class="Identifier">StencilView</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Legacy constructor - creates a StencilView (use LatticeStencil instead)
    
  </dd>
</div>

</div>
<div id="nLanes-procs-all">
  <div id="nLanes,LatticeStencil[D]">
  <dt><pre><span class="Keyword">proc</span> <a href="#nLanes%2CLatticeStencil%5BD%5D"><span class="Identifier">nLanes</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="nOuter-procs-all">
  <div id="nOuter,LatticeStencil[D]">
  <dt><pre><span class="Keyword">proc</span> <a href="#nOuter%2CLatticeStencil%5BD%5D"><span class="Identifier">nOuter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="nPoints-procs-all">
  <div id="nPoints,StencilPattern[D]">
  <dt><pre><span class="Keyword">proc</span> <a href="#nPoints%2CStencilPattern%5BD%5D"><span class="Identifier">nPoints</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="nSites-procs-all">
  <div id="nSites,LatticeStencil[D]">
  <dt><pre><span class="Keyword">proc</span> <a href="#nSites%2CLatticeStencil%5BD%5D"><span class="Identifier">nSites</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="offsetBufferSize-procs-all">
  <div id="offsetBufferSize,LatticeStencil[D]">
  <dt><pre><span class="Keyword">proc</span> <a href="#offsetBufferSize%2CLatticeStencil%5BD%5D"><span class="Identifier">offsetBufferSize</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="paddedToLocal-procs-all">
  <div id="paddedToLocal,int,array[D,int],array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#paddedToLocal%2Cint%2Carray%5BD%2Cint%5D%2Carray%5BD%2Cint%5D"><span class="Identifier">paddedToLocal</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">paddedSite</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span>
                                  <span class="Identifier">ghostWidth</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>
<div id="paddedToLocal,LatticeStencil[D],int">
  <dt><pre><span class="Keyword">proc</span> <a href="#paddedToLocal%2CLatticeStencil%5BD%5D%2Cint"><span class="Identifier">paddedToLocal</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">paddedSite</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Convert padded site index to local site index Returns -1 if site is in ghost region
    
  </dd>
</div>

</div>
<div id="pathToStencil-procs-all">
  <div id="pathToStencil,openArray[PathStep]">
  <dt><pre><span class="Keyword">proc</span> <a href="#pathToStencil%2CopenArray%5BPathStep%5D"><span class="Identifier">pathToStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">path</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><a href="stencil.html#PathStep"><span class="Identifier">PathStep</span></a><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="plaquettePath-procs-all">
  <div id="plaquettePath,int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#plaquettePath%2Cint%2Cint"><span class="Identifier">plaquettePath</span></a><span class="Other">(</span><span class="Identifier">mu</span><span class="Other">,</span> <span class="Identifier">nu</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="stencil.html#PathStep"><span class="Identifier">PathStep</span></a><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="rectanglePath-procs-all">
  <div id="rectanglePath,int,int,int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#rectanglePath%2Cint%2Cint%2Cint%2Cint"><span class="Identifier">rectanglePath</span></a><span class="Other">(</span><span class="Identifier">mu</span><span class="Other">,</span> <span class="Identifier">nu</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="stencil.html#PathStep"><span class="Identifier">PathStep</span></a><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="shift-procs-all">
  <div id="shift,LatticeStencil[D],int,SignedDirection">
  <dt><pre><span class="Keyword">proc</span> <a href="#shift%2CLatticeStencil%5BD%5D%2Cint%2CSignedDirection"><span class="Identifier">shift</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">sd</span><span class="Other">:</span> <a href="stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilShift"><span class="Identifier">StencilShift</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Get a stencil shift using SignedDirection
    
  </dd>
</div>
<div id="shift,LatticeStencil[D],int,int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#shift%2CLatticeStencil%5BD%5D%2Cint%2Cint%2Cint"><span class="Identifier">shift</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">sign</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">dir</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#StencilShift"><span class="Identifier">StencilShift</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    <p>Get a stencil shift for neighbor access</p>
<p>Usage: view<a class="reference internal" href="#stencil.shift(n, +1, 0)">stencil.shift(n, +1, 0)</a>  # Forward neighbor in x view<a class="reference internal" href="#stencil.shift(n, -1, 3)">stencil.shift(n, -1, 3)</a>  # Backward neighbor in t</p>
<p>The point index is computed from (sign, dir) using the pattern: Forward stencil points are at even indices (0, 2, 4, ...) Backward stencil points are at odd indices (1, 3, 5, ...)</p>

    
  </dd>
</div>

</div>
<div id="step-procs-all">
  <div id="step,int,bool">
  <dt><pre><span class="Keyword">proc</span> <a href="#step%2Cint%2Cbool"><span class="Identifier">step</span></a><span class="Other">(</span><span class="Identifier">dir</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">forward</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">true</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#PathStep"><span class="Identifier">PathStep</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="15">
  <h1><a class="toc-backref" href="#15">Iterators</a></h1>
  <dl class="item">
    <div id="allDirections-iterators-all">
  <div id="allDirections.i,int">
  <dt><pre><span class="Keyword">iterator</span> <a href="#allDirections.i%2Cint"><span class="Identifier">allDirections</span></a><span class="Other">(</span><span class="Identifier">nDim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Iterate over all directions (forward and backward)
    
  </dd>
</div>

</div>
<div id="directions-iterators-all">
  <div id="directions.i,int">
  <dt><pre><span class="Keyword">iterator</span> <a href="#directions.i%2Cint"><span class="Identifier">directions</span></a><span class="Other">(</span><span class="Identifier">nDim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="neighbors-iterators-all">
  <div id="neighbors.i,LatticeStencil[D],int">
  <dt><pre><span class="Keyword">iterator</span> <a href="#neighbors.i%2CLatticeStencil%5BD%5D%2Cint"><span class="Identifier">neighbors</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="points-iterators-all">
  <div id="points.i,LatticeStencil[D]">
  <dt><pre><span class="Keyword">iterator</span> <a href="#points.i%2CLatticeStencil%5BD%5D"><span class="Identifier">points</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="sites-iterators-all">
  <div id="sites.i,LatticeStencil[D]">
  <dt><pre><span class="Keyword">iterator</span> <a href="#sites.i%2CLatticeStencil%5BD%5D"><span class="Identifier">sites</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="18">
  <h1><a class="toc-backref" href="#18">Templates</a></h1>
  <dl class="item">
    <div id="forEachNeighbor-templates-all">
  <div id="forEachNeighbor.t,LatticeStencil[D],int,untyped,untyped,untyped">
  <dt><pre><span class="Keyword">template</span> <a href="#forEachNeighbor.t%2CLatticeStencil%5BD%5D%2Cint%2Cuntyped%2Cuntyped%2Cuntyped"><span class="Identifier">forEachNeighbor</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <a href="stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">site</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span>
                                        <span class="Identifier">pointVar</span><span class="Other">,</span> <span class="Identifier">nbrVar</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="T-templates-all">
  <div id="T.t">
  <dt><pre><span class="Keyword">template</span> <a href="#T.t"><span class="Identifier">T</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="X-templates-all">
  <div id="X.t">
  <dt><pre><span class="Keyword">template</span> <a href="#X.t"><span class="Identifier">X</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="Y-templates-all">
  <div id="Y.t">
  <dt><pre><span class="Keyword">template</span> <a href="#Y.t"><span class="Identifier">Y</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="Z-templates-all">
  <div id="Z.t">
  <dt><pre><span class="Keyword">template</span> <a href="#Z.t"><span class="Identifier">Z</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stencil.html#Direction"><span class="Identifier">Direction</span></a></pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>

  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2026-02-07 04:08:33 UTC</small>
      </div>
    </div>
  </div>
  
</body>
</html>
