<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en" data-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>tensor/transporter</title>

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css?v=2.2.4">

<!-- JS -->
<script type="text/javascript" src="../dochack.js?v=2.2.4"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">tensor/transporter</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="../theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" oninput="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li><a class="reference" id="transporter-minus-parallel-transport-with-mpi-halo-exchange_toc" href="#transporter-minus-parallel-transport-with-mpi-halo-exchange">Transporter - Parallel Transport with MPI Halo Exchange</a></li>
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#7" id="57">Types</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#CovariantDerivativeDir" title="CovariantDerivativeDir = enum
  cdForward, cdBackward, cdSymmetric">CovariantDerivativeDir</a></li>
<li><a class="reference" href="#HaloRegion" title="HaloRegion[D] = object
  dim*: int
  direction*: int
  thickness*: int
  localGeom*: array[D, int]
  lo*: array[D, int]
  hi*: array[D, int]
  nSites*: int">HaloRegion</a></li>
<li><a class="reference" href="#ShiftDir" title="ShiftDir = object
  dim*: int
  len*: int">ShiftDir</a></li>
<li><a class="reference" href="#Shifter" title="Shifter[D; T] = object
  dim*: int
  len*: int
  indices*: ShiftIndices[D]
  sendBuf*: seq[T]
  recvBuf*: seq[T]">Shifter</a></li>
<li><a class="reference" href="#ShiftIndices" title="ShiftIndices[D] = object
  dim*: int
  len*: int
  localGeom*: array[D, int]
  nSites*: int
  localIdx*: seq[int32]
  isLocal*: seq[bool]
  sendSites*: seq[int32]
  recvSites*: seq[int32]
  nSendSites*: int
  nRecvSites*: int">ShiftIndices</a></li>
<li><a class="reference" href="#Transporter" title="Transporter[D; U; F] = object
  dim*: int
  len*: int
  indices*: ShiftIndices[D]
  link*: ptr U
  sendBuf*: seq[F]
  recvBuf*: seq[F]">Transporter</a></li>
<li><a class="reference" href="#TransportPattern" title="TransportPattern[D] = object
  stencil*: Stencil[D]
  shiftIndices*: seq[ShiftIndices[D]]">TransportPattern</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">$
  <li><a class="reference" href="#%24%2CShiftDir" title="`$`(sd: ShiftDir): string">`$`(sd: ShiftDir): string</a></li>

</ul>
<ul class="simple nested-toc-section">applyShiftLocal
  <li><a class="reference" href="#applyShiftLocal%2CShifter%5BD%2CT%5D%2CopenArray%5BT%5D%2CopenArray%5BT%5D" title="applyShiftLocal[D: static int; T](shifter: Shifter[D, T]; source: openArray[T];
                                  dest: var openArray[T])">applyShiftLocal[D: static int; T](shifter: Shifter[D, T]; source: openArray[T];
                                  dest: var openArray[T])</a></li>

</ul>
<ul class="simple nested-toc-section">backward
  <li><a class="reference" href="#backward%2Cint" title="backward(dim: int): ShiftDir">backward(dim: int): ShiftDir</a></li>

</ul>
<ul class="simple nested-toc-section">backwardShiftIdx
  <li><a class="reference" href="#backwardShiftIdx%2CTransportPattern%2Cint" title="backwardShiftIdx(pattern: TransportPattern; dim: int): int">backwardShiftIdx(pattern: TransportPattern; dim: int): int</a></li>

</ul>
<ul class="simple nested-toc-section">covariantShiftBackward
  <li><a class="reference" href="#covariantShiftBackward%2CT%2CT" title="covariantShiftBackward[T](gaugeLinkShifted: T; psiShifted: T): T">covariantShiftBackward[T](gaugeLinkShifted: T; psiShifted: T): T</a></li>

</ul>
<ul class="simple nested-toc-section">covariantShiftForward
  <li><a class="reference" href="#covariantShiftForward%2CT%2CT" title="covariantShiftForward[T](gaugeLink: T; psiShifted: T): T">covariantShiftForward[T](gaugeLink: T; psiShifted: T): T</a></li>

</ul>
<ul class="simple nested-toc-section">forward
  <li><a class="reference" href="#forward%2Cint" title="forward(dim: int): ShiftDir">forward(dim: int): ShiftDir</a></li>

</ul>
<ul class="simple nested-toc-section">forwardShiftIdx
  <li><a class="reference" href="#forwardShiftIdx%2CTransportPattern%2Cint" title="forwardShiftIdx(pattern: TransportPattern; dim: int): int">forwardShiftIdx(pattern: TransportPattern; dim: int): int</a></li>

</ul>
<ul class="simple nested-toc-section">newBackwardShifters
  <li><a class="reference" href="#newBackwardShifters%2Carray%5BD%2Cint%5D%2Cint" title="newBackwardShifters[D: static int; T](localGeom: array[D, int]; len: int = 1): array[
    D, Shifter[D, T]]">newBackwardShifters[D: static int; T](localGeom: array[D, int]; len: int = 1): array[
    D, Shifter[D, T]]</a></li>

</ul>
<ul class="simple nested-toc-section">newHaloRegion
  <li><a class="reference" href="#newHaloRegion%2Cint%2Cint%2Cint%2Carray%5BD%2Cint%5D" title="newHaloRegion[D: static int](dim: int; direction: int; thickness: int;
                             localGeom: array[D, int]): HaloRegion[D]">newHaloRegion[D: static int](dim: int; direction: int; thickness: int;
                             localGeom: array[D, int]): HaloRegion[D]</a></li>

</ul>
<ul class="simple nested-toc-section">newShifter
  <li><a class="reference" href="#newShifter%2Carray%5BD%2Cint%5D%2Cint%2Cint" title="newShifter[D: static int; T](localGeom: array[D, int]; dim: int; len: int = 1): Shifter[
    D, T]">newShifter[D: static int; T](localGeom: array[D, int]; dim: int; len: int = 1): Shifter[
    D, T]</a></li>

</ul>
<ul class="simple nested-toc-section">newShifters
  <li><a class="reference" href="#newShifters%2Carray%5BD%2Cint%5D%2Cint" title="newShifters[D: static int; T](localGeom: array[D, int]; len: int = 1): array[D,
    Shifter[D, T]]">newShifters[D: static int; T](localGeom: array[D, int]; len: int = 1): array[D,
    Shifter[D, T]]</a></li>

</ul>
<ul class="simple nested-toc-section">newShiftIndices
  <li><a class="reference" href="#newShiftIndices%2Cint%2Cint%2Carray%5BD%2Cint%5D" title="newShiftIndices[D: static int](dim: int; len: int; localGeom: array[D, int]): ShiftIndices[
    D]">newShiftIndices[D: static int](dim: int; len: int; localGeom: array[D, int]): ShiftIndices[
    D]</a></li>

</ul>
<ul class="simple nested-toc-section">newTransporter
  <li><a class="reference" href="#newTransporter%2Carray%5BD%2Cint%5D%2Cptr.U%2Cint%2Cint" title="newTransporter[D: static int; U, F](localGeom: array[D, int]; gaugeField: ptr U;
                                    dim: int; len: int = 1): Transporter[D, U, F]">newTransporter[D: static int; U, F](localGeom: array[D, int]; gaugeField: ptr U;
                                    dim: int; len: int = 1): Transporter[D, U, F]</a></li>

</ul>
<ul class="simple nested-toc-section">newTransportPattern
  <li><a class="reference" href="#newTransportPattern%2Carray%5BD%2Cint%5D%2Cint" title="newTransportPattern[D: static int](localGeom: array[D, int]; len: int = 1): TransportPattern[
    D]">newTransportPattern[D: static int](localGeom: array[D, int]; len: int = 1): TransportPattern[
    D]</a></li>

</ul>
<ul class="simple nested-toc-section">shift
  <li><a class="reference" href="#shift%2Cint%2Cint" title="shift(dim: int; len: int = 1): ShiftDir">shift(dim: int; len: int = 1): ShiftDir</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#18" id="68">Templates</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">^*
  <li><a class="reference" href="#%5E%2A.t%2CShifter%5BD%2CT%5D%2CopenArray%5BT%5D" title="`^*`[D: static int; T](shifter: Shifter[D, T]; source: openArray[T]): seq[T]">`^*`[D: static int; T](shifter: Shifter[D, T]; source: openArray[T]): seq[T]</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <a class="reference reference-toplevel" href="#19" id="69">Exports</a>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    
    <div id="tocRoot"></div>
    
    <p class="module-desc">
<h1><a class="toc-backref" id="transporter-minus-parallel-transport-with-mpi-halo-exchange" href="#transporter-minus-parallel-transport-with-mpi-halo-exchange">Transporter - Parallel Transport with MPI Halo Exchange</a></h1><p>This module provides parallel transport operations for lattice gauge theory. Unlike stencils (which are local), transporters handle MPI communication for accessing neighbors across rank boundaries.</p>
<p>Key concepts:</p>
<ul class="simple"><li><strong>Shifter</strong>: Shift fields in a direction (no gauge link multiplication)</li>
<li><strong>Transporter</strong>: Parallel transport with gauge link multiplication (covariant)</li>
<li><strong>HaloBuffer</strong>: Communication buffers for boundary exchange</li>
</ul>
<p>Design Philosophy:</p>
<ul class="simple"><li>Explicit direction handling with compile-time safety</li>
<li>Support for forward (+) and backward (-) transport</li>
<li>Covariant derivatives: D_Î¼ Ïˆ = (U_Î¼(x) Ïˆ(x+Î¼) - Ïˆ(x)) / a</li>
<li>AoSoA-aware for SIMD vectorization</li>
<li>Multi-device and MPI compatible</li>
</ul>
<p>Example usage:</p>
<p><pre class="listing"><span class="Comment"># Create shifters for all directions</span>
<span class="Keyword">let</span> <span class="Identifier">shifters</span> <span class="Operator">=</span> <span class="Identifier">newShifters</span><span class="Punctuation">(</span><span class="Identifier">field</span><span class="Punctuation">,</span> <span class="Identifier">len</span><span class="Operator">=</span><span class="DecNumber">1</span><span class="Punctuation">)</span>

<span class="Comment"># Shift field forward in direction 0</span>
<span class="Keyword">let</span> <span class="Identifier">shifted</span> <span class="Operator">=</span> <span class="Identifier">shifters</span><span class="Punctuation">[</span><span class="DecNumber">0</span><span class="Punctuation">]</span> <span class="Operator">^*</span> <span class="Identifier">field</span>

<span class="Comment"># Create transporters with gauge links</span>
<span class="Keyword">let</span> <span class="Identifier">transporters</span> <span class="Operator">=</span> <span class="Identifier">newTransporters</span><span class="Punctuation">(</span><span class="Identifier">gaugeField</span><span class="Punctuation">,</span> <span class="Identifier">field</span><span class="Punctuation">,</span> <span class="Identifier">len</span><span class="Operator">=</span><span class="DecNumber">1</span><span class="Punctuation">)</span>

<span class="Comment"># Parallel transport: U_Î¼(x) * Ïˆ(x+Î¼)</span>
<span class="Keyword">let</span> <span class="Identifier">transported</span> <span class="Operator">=</span> <span class="Identifier">transporters</span><span class="Punctuation">[</span><span class="DecNumber">0</span><span class="Punctuation">]</span> <span class="Operator">^*</span> <span class="Identifier">field</span>

<span class="Comment"># Covariant derivative in direction Î¼</span>
<span class="Keyword">let</span> <span class="Identifier">Dpsi</span> <span class="Operator">=</span> <span class="Identifier">covariantDerivative</span><span class="Punctuation">(</span><span class="Identifier">gaugeField</span><span class="Punctuation">,</span> <span class="Identifier">psi</span><span class="Punctuation">,</span> <span class="Identifier">mu</span><span class="Punctuation">)</span></pre></p>
<p>Inspired by QEX's transporters but with a cleaner API for LGT.</p>
</p>
    <div class="section" id="6">
  <h1><a class="toc-backref" href="#6">Imports</a></h1>
  <dl class="item">
    <a class="reference external" href="../lattice/stencil.html">../lattice/stencil</a>
  </dl>
</div>
<div class="section" id="7">
  <h1><a class="toc-backref" href="#7">Types</a></h1>
  <dl class="item">
    <div id="CovariantDerivativeDir">
  <dt><pre><a href="transporter.html#CovariantDerivativeDir"><span class="Identifier">CovariantDerivativeDir</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">cdForward</span><span class="Other">,</span> <span class="Identifier">cdBackward</span><span class="Other">,</span> <span class="Identifier">cdSymmetric</span></pre></dt>
  <dd>
    
    Direction type for covariant derivative
    
  </dd>
</div>
<div id="HaloRegion">
  <dt><pre><a href="transporter.html#HaloRegion"><span class="Identifier">HaloRegion</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">dim</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">direction</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">thickness</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">localGeom</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">lo</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">hi</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">nSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Description of a halo region for communication
    
  </dd>
</div>
<div id="ShiftDir">
  <dt><pre><a href="transporter.html#ShiftDir"><span class="Identifier">ShiftDir</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">dim</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">len</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    Direction and displacement for shifting/transport
    
  </dd>
</div>
<div id="Shifter">
  <dt><pre><a href="transporter.html#Shifter"><span class="Identifier">Shifter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">;</span> <span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">dim</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">len</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">indices</span><span class="Operator">*</span><span class="Other">:</span> <a href="transporter.html#ShiftIndices"><span class="Identifier">ShiftIndices</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span>
  <span class="Identifier">sendBuf</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span>
  <span class="Identifier">recvBuf</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Shifter for moving fields in a direction</p>
<p>Handles MPI communication for boundary sites. Use <tt class="docutils literal"><span class="pre"><span class="Operator">^*</span></span></tt> operator to apply: shifted = shifter ^* field</p>

    
  </dd>
</div>
<div id="ShiftIndices">
  <dt><pre><a href="transporter.html#ShiftIndices"><span class="Identifier">ShiftIndices</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">dim</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">len</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">localGeom</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span>
  <span class="Identifier">nSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">localIdx</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">int32</span><span class="Other">]</span>
  <span class="Identifier">isLocal</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">bool</span><span class="Other">]</span>
  <span class="Identifier">sendSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">int32</span><span class="Other">]</span>
  <span class="Identifier">recvSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">int32</span><span class="Other">]</span>
  <span class="Identifier">nSendSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">nRecvSites</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
  <dd>
    
    <p>Pre-computed indices for a shift operation</p>
<p>For each local site, stores where to get the shifted value:</p>
<ul class="simple"><li>If isLocal<a class="reference internal" href="#i">i</a>: source is localIdx<a class="reference internal" href="#i">i</a> (within this rank)</li>
<li>Else: source is from receive buffer at recvIdx<a class="reference internal" href="#i">i</a></li>
</ul>

    
  </dd>
</div>
<div id="Transporter">
  <dt><pre><a href="transporter.html#Transporter"><span class="Identifier">Transporter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">;</span> <span class="Identifier">U</span><span class="Other">;</span> <span class="Identifier">F</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">dim</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">len</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">indices</span><span class="Operator">*</span><span class="Other">:</span> <a href="transporter.html#ShiftIndices"><span class="Identifier">ShiftIndices</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span>
  <span class="Identifier">link</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">U</span>
  <span class="Identifier">sendBuf</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">F</span><span class="Other">]</span>
  <span class="Identifier">recvBuf</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">F</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Transporter for gauge-covariant field shifting</p>
<p>Multiplies by gauge link during transport:</p>
<ul class="simple"><li>Forward: U_Î¼(x) * Ïˆ(x+Î¼)</li>
<li>Backward: U_Î¼(x-Î¼)â€  * Ïˆ(x-Î¼)</li>
</ul>

    
  </dd>
</div>
<div id="TransportPattern">
  <dt><pre><a href="transporter.html#TransportPattern"><span class="Identifier">TransportPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">stencil</span><span class="Operator">*</span><span class="Other">:</span> <a href="../lattice/stencil.html#Stencil"><span class="Identifier">Stencil</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span>
  <span class="Identifier">shiftIndices</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="transporter.html#ShiftIndices"><span class="Identifier">ShiftIndices</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>A pattern of transport operations</p>
<p>Combines stencil geometry with gauge link information for efficient multi-direction transport.</p>

    
  </dd>
</div>

  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="$-procs-all">
  <div id="$,ShiftDir">
  <dt><pre><span class="Keyword">proc</span> <a href="#%24%2CShiftDir"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">sd</span><span class="Other">:</span> <a href="transporter.html#ShiftDir"><span class="Identifier">ShiftDir</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="applyShiftLocal-procs-all">
  <div id="applyShiftLocal,Shifter[D,T],openArray[T],openArray[T]">
  <dt><pre><span class="Keyword">proc</span> <a href="#applyShiftLocal%2CShifter%5BD%2CT%5D%2CopenArray%5BT%5D%2CopenArray%5BT%5D"><span class="Identifier">applyShiftLocal</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">shifter</span><span class="Other">:</span> <a href="transporter.html#Shifter"><span class="Identifier">Shifter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span>
                                       <span class="Identifier">source</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span>
                                       <span class="Identifier">dest</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
  <dd>
    
    <p>Apply shift operation (local sites only, no MPI)</p>
<p>For sites that need data from other ranks, uses periodic wrapping within the local domain (single-rank mode).</p>

    
  </dd>
</div>

</div>
<div id="backward-procs-all">
  <div id="backward,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#backward%2Cint"><span class="Identifier">backward</span></a><span class="Other">(</span><span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="transporter.html#ShiftDir"><span class="Identifier">ShiftDir</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Backward shift in dimension <tt class="docutils literal"><span class="pre"><span class="Identifier">dim</span></span></tt> (length -1)
    
  </dd>
</div>

</div>
<div id="backwardShiftIdx-procs-all">
  <div id="backwardShiftIdx,TransportPattern,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#backwardShiftIdx%2CTransportPattern%2Cint"><span class="Identifier">backwardShiftIdx</span></a><span class="Other">(</span><span class="Identifier">pattern</span><span class="Other">:</span> <a href="transporter.html#TransportPattern"><span class="Identifier">TransportPattern</span></a><span class="Other">;</span> <span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Get index of backward shift indices for dimension dim
    
  </dd>
</div>

</div>
<div id="covariantShiftBackward-procs-all">
  <div id="covariantShiftBackward,T,T">
  <dt><pre><span class="Keyword">proc</span> <a href="#covariantShiftBackward%2CT%2CT"><span class="Identifier">covariantShiftBackward</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">gaugeLinkShifted</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">;</span> <span class="Identifier">psiShifted</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    <p>Backward covariant shift: U_Î¼(x-Î¼)â€  * Ïˆ(x-Î¼)</p>
<p>Note: gaugeLinkShifted should already be the adjoint of U_Î¼(x-Î¼)</p>

    
  </dd>
</div>

</div>
<div id="covariantShiftForward-procs-all">
  <div id="covariantShiftForward,T,T">
  <dt><pre><span class="Keyword">proc</span> <a href="#covariantShiftForward%2CT%2CT"><span class="Identifier">covariantShiftForward</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">gaugeLink</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">;</span> <span class="Identifier">psiShifted</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    <p>Forward covariant shift: U_Î¼(x) * Ïˆ(x+Î¼)</p>
<p>This is the basic building block for covariant derivatives and Wilson-Dirac operators.</p>

    
  </dd>
</div>

</div>
<div id="forward-procs-all">
  <div id="forward,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#forward%2Cint"><span class="Identifier">forward</span></a><span class="Other">(</span><span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <a href="transporter.html#ShiftDir"><span class="Identifier">ShiftDir</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Forward shift in dimension <tt class="docutils literal"><span class="pre"><span class="Identifier">dim</span></span></tt> (length +1)
    
  </dd>
</div>

</div>
<div id="forwardShiftIdx-procs-all">
  <div id="forwardShiftIdx,TransportPattern,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#forwardShiftIdx%2CTransportPattern%2Cint"><span class="Identifier">forwardShiftIdx</span></a><span class="Other">(</span><span class="Identifier">pattern</span><span class="Other">:</span> <a href="transporter.html#TransportPattern"><span class="Identifier">TransportPattern</span></a><span class="Other">;</span> <span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Get index of forward shift indices for dimension dim
    
  </dd>
</div>

</div>
<div id="newBackwardShifters-procs-all">
  <div id="newBackwardShifters,array[D,int],int">
  <dt><pre><span class="Keyword">proc</span> <a href="#newBackwardShifters%2Carray%5BD%2Cint%5D%2Cint"><span class="Identifier">newBackwardShifters</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span>
    <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <a href="transporter.html#Shifter"><span class="Identifier">Shifter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create backward shifters for all D directions
    
  </dd>
</div>

</div>
<div id="newHaloRegion-procs-all">
  <div id="newHaloRegion,int,int,int,array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#newHaloRegion%2Cint%2Cint%2Cint%2Carray%5BD%2Cint%5D"><span class="Identifier">newHaloRegion</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">direction</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">thickness</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span>
                                  <span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="transporter.html#HaloRegion"><span class="Identifier">HaloRegion</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create a halo region description
    
  </dd>
</div>

</div>
<div id="newShifter-procs-all">
  <div id="newShifter,array[D,int],int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#newShifter%2Carray%5BD%2Cint%5D%2Cint%2Cint"><span class="Identifier">newShifter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span>
                                  <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">)</span><span class="Other">:</span> <a href="transporter.html#Shifter"><span class="Identifier">Shifter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create a shifter for the given direction and length
    
  </dd>
</div>

</div>
<div id="newShifters-procs-all">
  <div id="newShifters,array[D,int],int">
  <dt><pre><span class="Keyword">proc</span> <a href="#newShifters%2Carray%5BD%2Cint%5D%2Cint"><span class="Identifier">newShifters</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">,</span> <a href="transporter.html#Shifter"><span class="Identifier">Shifter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create shifters for all D directions
    
  </dd>
</div>

</div>
<div id="newShiftIndices-procs-all">
  <div id="newShiftIndices,int,int,array[D,int]">
  <dt><pre><span class="Keyword">proc</span> <a href="#newShiftIndices%2Cint%2Cint%2Carray%5BD%2Cint%5D"><span class="Identifier">newShiftIndices</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="transporter.html#ShiftIndices"><span class="Identifier">ShiftIndices</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Create pre-computed shift indices</p>
<p>For shift in dimension <tt class="docutils literal"><span class="pre"><span class="Identifier">dim</span></span></tt> by <tt class="docutils literal"><span class="pre"><span class="Identifier">len</span></span></tt> sites. Positive len = forward shift (access site at x+len) Negative len = backward shift (access site at x-len)</p>

    
  </dd>
</div>

</div>
<div id="newTransporter-procs-all">
  <div id="newTransporter,array[D,int],ptr.U,int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#newTransporter%2Carray%5BD%2Cint%5D%2Cptr.U%2Cint%2Cint"><span class="Identifier">newTransporter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">U</span><span class="Other">,</span> <span class="Identifier">F</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span>
    <span class="Identifier">gaugeField</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">U</span><span class="Other">;</span> <span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">)</span><span class="Other">:</span> <a href="transporter.html#Transporter"><span class="Identifier">Transporter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">U</span><span class="Other">,</span> <span class="Identifier">F</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create a transporter for the given direction
    
  </dd>
</div>

</div>
<div id="newTransportPattern-procs-all">
  <div id="newTransportPattern,array[D,int],int">
  <dt><pre><span class="Keyword">proc</span> <a href="#newTransportPattern%2Carray%5BD%2Cint%5D%2Cint"><span class="Identifier">newTransportPattern</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">localGeom</span><span class="Other">:</span> <span class="Identifier">array</span><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">)</span><span class="Other">:</span> <a href="transporter.html#TransportPattern"><span class="Identifier">TransportPattern</span></a><span class="Other">[</span>
    <span class="Identifier">D</span><span class="Other">]</span></pre></dt>
  <dd>
    
    Create transport pattern for nearest-neighbor transport
    
  </dd>
</div>

</div>
<div id="shift-procs-all">
  <div id="shift,int,int">
  <dt><pre><span class="Keyword">proc</span> <a href="#shift%2Cint%2Cint"><span class="Identifier">shift</span></a><span class="Other">(</span><span class="Identifier">dim</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">len</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">)</span><span class="Other">:</span> <a href="transporter.html#ShiftDir"><span class="Identifier">ShiftDir</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Create a shift in dimension <tt class="docutils literal"><span class="pre"><span class="Identifier">dim</span></span></tt> with length <tt class="docutils literal"><span class="pre"><span class="Identifier">len</span></span></tt>
    
  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="18">
  <h1><a class="toc-backref" href="#18">Templates</a></h1>
  <dl class="item">
    <div id="^*-templates-all">
  <div id="^*.t,Shifter[D,T],openArray[T]">
  <dt><pre><span class="Keyword">template</span> <a href="#%5E%2A.t%2CShifter%5BD%2CT%5D%2CopenArray%5BT%5D"><span class="Identifier">`^*`</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">shifter</span><span class="Other">:</span> <a href="transporter.html#Shifter"><span class="Identifier">Shifter</span></a><span class="Other">[</span><span class="Identifier">D</span><span class="Other">,</span> <span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">source</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span>
    <span class="Identifier">T</span><span class="Other">]</span></pre></dt>
  <dd>
    
    <p>Apply shifter to source field (single-rank mode)</p>
<p>Returns shifted field: result<a class="reference internal" href="#x">x</a> = source<a class="reference internal" href="#x + shift">x + shift</a></p>

    
  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="19">
  <h1><a class="toc-backref" href="#19">Exports</a></h1>
  <dl class="item">
    <a href="../lattice/stencil.html#newLatticeStencil,StencilPattern[D],array[D,int],array[D,int],array[D,int]"><span class="Identifier">newLatticeStencil</span></a>, <a href="../lattice/stencil.html#newLatticeStencil,StencilPattern[D],array[D,int],array[D,int]"><span class="Identifier">newLatticeStencil</span></a>, <a href="../lattice/stencil.html#UseOpenCL"><span class="Identifier">UseOpenCL</span></a>, <a href="../lattice/stencil.html#LatticeStencil"><span class="Identifier">LatticeStencil</span></a>, <a href="../lattice/stencil.html#newLatticeStencil,StencilPattern[D],array[D,int]"><span class="Identifier">newLatticeStencil</span></a>, <a href="../lattice/stencil.html#nLanes,LatticeStencil[D]"><span class="Identifier">nLanes</span></a>, <a href="../lattice/stencil.html#Y.t"><span class="Identifier">Y</span></a>, <a href="../lattice/stencil.html#pathToStencil,openArray[PathStep]"><span class="Identifier">pathToStencil</span></a>, <a href="../lattice/stencil.html#addPoint,StencilPattern[D],array[D,int]"><span class="Identifier">addPoint</span></a>, <a href="../lattice/stencil.html#fwd,int"><span class="Identifier">fwd</span></a>, <a href="../lattice/stencil.html#==,Direction,Direction"><span class="Identifier">==</span></a>, <a href="../lattice/stencil.html#localToPadded,int,array[D,int],array[D,int]"><span class="Identifier">localToPadded</span></a>, <a href="../lattice/stencil.html#newStencilView,StencilPattern[D],array[D,int]"><span class="Identifier">newStencilView</span></a>, <a href="../lattice/stencil.html#backward,Direction"><span class="Identifier">backward</span></a>, <a href="../lattice/stencil.html#hash,Direction"><span class="Identifier">hash</span></a>, <a href="../lattice/stencil.html#nPoints,StencilPattern[D]"><span class="Identifier">nPoints</span></a>, <a href="../lattice/stencil.html#newLatticeStencil,StencilPattern[D],L"><span class="Identifier">newLatticeStencil</span></a>, <a href="../lattice/stencil.html#idx,StencilShift"><span class="Identifier">idx</span></a>, <a href="../lattice/stencil.html#Z.t"><span class="Identifier">Z</span></a>, <a href="../lattice/stencil.html#bwd,int"><span class="Identifier">bwd</span></a>, <a href="../lattice/stencil.html#$,Direction"><span class="Identifier">$</span></a>, <a href="../lattice/stencil.html#$,SignedDirection"><span class="Identifier">$</span></a>, <a href="../lattice/stencil.html#directions.i,int"><span class="Identifier">directions</span></a>, <a href="../lattice/stencil.html#$,StencilPoint[D]"><span class="Identifier">$</span></a>, <a href="../lattice/stencil.html#shift,LatticeStencil[D],int,SignedDirection"><span class="Identifier">shift</span></a>, <a href="../lattice/stencil.html#allDirections.i,int"><span class="Identifier">allDirections</span></a>, <a href="../lattice/stencil.html#neighborOffset,StencilView[D],int,int"><span class="Identifier">neighborOffset</span></a>, <a href="../lattice/stencil.html#offsetBufferSize,LatticeStencil[D]"><span class="Identifier">offsetBufferSize</span></a>, <a href="../lattice/stencil.html#rectanglePath,int,int,int,int"><span class="Identifier">rectanglePath</span></a>, <a href="../lattice/stencil.html#forEachNeighbor.t,LatticeStencil[D],int,untyped,untyped,untyped"><span class="Identifier">forEachNeighbor</span></a>, <a href="../lattice/stencil.html#addPoint,StencilPattern[D],int,int"><span class="Identifier">addPoint</span></a>, <a href="../lattice/stencil.html#nearestNeighborStencil,L"><span class="Identifier">nearestNeighborStencil</span></a>, <a href="../lattice/stencil.html#paddedToLocal,int,array[D,int],array[D,int]"><span class="Identifier">paddedToLocal</span></a>, <a href="../lattice/stencil.html#bwd,LatticeStencil[D],int,int"><span class="Identifier">bwd</span></a>, <a href="../lattice/stencil.html#forwardStencil,L"><span class="Identifier">forwardStencil</span></a>, <a href="../lattice/stencil.html#VectorWidth"><span class="Identifier">VectorWidth</span></a>, <a href="../lattice/stencil.html#neighborSimd,LatticeStencil[D],int,int,int"><span class="Identifier">neighborSimd</span></a>, <a href="../lattice/stencil.html#Stencil"><span class="Identifier">Stencil</span></a>, <a href="../lattice/stencil.html#nearestNeighborStencil"><span class="Identifier">nearestNeighborStencil</span></a>, <a href="../lattice/stencil.html#StencilPattern"><span class="Identifier">StencilPattern</span></a>, <a href="../lattice/stencil.html#laplacianStencil"><span class="Identifier">laplacianStencil</span></a>, <a href="../lattice/stencil.html#Direction"><span class="Identifier">Direction</span></a>, <a href="../lattice/stencil.html#nOuter,LatticeStencil[D]"><span class="Identifier">nOuter</span></a>, <a href="../lattice/stencil.html#SignedDirection"><span class="Identifier">SignedDirection</span></a>, <a href="../lattice/stencil.html#backwardStencil"><span class="Identifier">backwardStencil</span></a>, <a href="../lattice/stencil.html#StencilEntry"><span class="Identifier">StencilEntry</span></a>, <a href="../lattice/stencil.html#StencilPoint"><span class="Identifier">StencilPoint</span></a>, <a href="../lattice/stencil.html#neighbor,LatticeStencil[D],int,int"><span class="Identifier">neighbor</span></a>, <a href="../lattice/stencil.html#step,int,bool"><span class="Identifier">step</span></a>, <a href="../lattice/stencil.html#newLatticeStencil,L"><span class="Identifier">newLatticeStencil</span></a>, <a href="../lattice/stencil.html#T.t"><span class="Identifier">T</span></a>, <a href="../lattice/stencil.html#plaquettePath,int,int"><span class="Identifier">plaquettePath</span></a>, <a href="../lattice/stencil.html#StencilBackend"><span class="Identifier">StencilBackend</span></a>, <a href="../lattice/stencil.html#paddedToLocal,LatticeStencil[D],int"><span class="Identifier">paddedToLocal</span></a>, <a href="../lattice/stencil.html#forwardStencil"><span class="Identifier">forwardStencil</span></a>, <a href="../lattice/stencil.html#fwd,LatticeStencil[D],int,int"><span class="Identifier">fwd</span></a>, <a href="../lattice/stencil.html#backwardStencil,L"><span class="Identifier">backwardStencil</span></a>, <a href="../lattice/stencil.html#forward,Direction"><span class="Identifier">forward</span></a>, <a href="../lattice/stencil.html#points.i,LatticeStencil[D]"><span class="Identifier">points</span></a>, <a href="../lattice/stencil.html#laplacianStencil,L"><span class="Identifier">laplacianStencil</span></a>, <a href="../lattice/stencil.html#getEntry,StencilView[D],int,int"><span class="Identifier">getEntry</span></a>, <a href="../lattice/stencil.html#newStencilPattern,string"><span class="Identifier">newStencilPattern</span></a>, <a href="../lattice/stencil.html#UseSYCL"><span class="Identifier">UseSYCL</span></a>, <a href="../lattice/stencil.html#newStencilPoint,array[D,int],int"><span class="Identifier">newStencilPoint</span></a>, <a href="../lattice/stencil.html#X.t"><span class="Identifier">X</span></a>, <a href="../lattice/stencil.html#getOffsetBuffer,LatticeStencil[D]"><span class="Identifier">getOffsetBuffer</span></a>, <a href="../lattice/stencil.html#$,StencilPattern[D]"><span class="Identifier">$</span></a>, <a href="../lattice/stencil.html#localToPadded,LatticeStencil[D],int"><span class="Identifier">localToPadded</span></a>, <a href="../lattice/stencil.html#shift,LatticeStencil[D],int,int,int"><span class="Identifier">shift</span></a>, <a href="../lattice/stencil.html#StencilShift"><span class="Identifier">StencilShift</span></a>, <a href="../lattice/stencil.html#StencilView"><span class="Identifier">StencilView</span></a>, <a href="../lattice/stencil.html#nSites,LatticeStencil[D]"><span class="Identifier">nSites</span></a>, <a href="../lattice/stencil.html#newStencil,string"><span class="Identifier">newStencil</span></a>, <a href="../lattice/stencil.html#neighbors.i,LatticeStencil[D],int"><span class="Identifier">neighbors</span></a>, <a href="../lattice/stencil.html#newStencilPoint,SignedDirection"><span class="Identifier">newStencilPoint</span></a>, <a href="../lattice/stencil.html#addPoint,StencilPattern[D],SignedDirection"><span class="Identifier">addPoint</span></a>, <a href="../lattice/stencil.html#isGhostNeighbor,LatticeStencil[D],int,int"><span class="Identifier">isGhostNeighbor</span></a>, <a href="../lattice/stencil.html#PathStep"><span class="Identifier">PathStep</span></a>, <a href="../lattice/stencil.html#sites.i,LatticeStencil[D]"><span class="Identifier">sites</span></a>, <a href="../lattice/stencil.html#UseOpenMP"><span class="Identifier">UseOpenMP</span></a>
  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2026-02-07 06:50:00 UTC</small>
      </div>
    </div>
  </div>
  
</body>
</html>
